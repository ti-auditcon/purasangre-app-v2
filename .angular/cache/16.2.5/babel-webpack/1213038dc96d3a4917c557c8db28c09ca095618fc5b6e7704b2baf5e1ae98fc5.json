{"ast":null,"code":"// env\nimport { environment } from '../../../../environments/environment';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Platform } from '@ionic/angular';\nimport { Preferences } from '@capacitor/preferences';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../shared/navbar/navbar.component\";\nfunction PlanDetailPage_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"p\")(2, \"b\");\n    i0.ɵɵtext(3, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.plan.description, \" \");\n  }\n}\nfunction PlanDetailPage_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"p\")(2, \"b\");\n    i0.ɵɵtext(3, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5, \" Elige un plan dise\\u00F1ado por el equipo PuraSangre para tu beneficio, una buena desici\\u00F3n para estar en forma. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nlet PlanDetailPage = /*#__PURE__*/(() => {\n  class PlanDetailPage {\n    constructor(activatedRoute, plt, http, router) {\n      this.activatedRoute = activatedRoute;\n      this.plt = plt;\n      this.http = http;\n      this.router = router;\n      if (this.plt.is('ios')) {\n        console.log('es ios');\n        // Si es iOS\n        this.buttonFixIOS = 'button-fix-ios';\n        this.buttonFixAndroid = 'display-none';\n      } else {\n        console.log('es android');\n        // Si es Android\n        this.buttonFixIOS = 'display-none';\n        this.buttonFixAndroid = 'button-fix';\n      }\n    }\n    ngOnInit() {}\n    ionViewDidEnter() {\n      const id = this.activatedRoute.snapshot.paramMap.get('planId');\n      console.log(this.activatedRoute.snapshot.paramMap);\n      Preferences.get({\n        key: 'authData'\n      }).then(authData => {\n        const parsedData = JSON.parse(authData.value);\n        const httpOptions = {\n          headers: new HttpHeaders({\n            Authorization: `Bearer ${parsedData.token}` // updated\n          })\n        };\n\n        console.log(id);\n        this.http.get(`${environment.SERVER_URL}/plans/${id}`, httpOptions).subscribe(result => {\n          console.log(result.data);\n          this.plan = result.data;\n        });\n        this.http.get(`${environment.SERVER_URL}/plans/${id}/dates`, httpOptions).subscribe(result => {\n          console.log(result);\n          this.dates = result;\n        });\n      });\n    }\n    contract(planId) {\n      this.router.navigate([`/home/tabs/plans/${planId}/flow`]);\n      // console.log(id);\n    }\n    static #_ = this.ɵfac = function PlanDetailPage_Factory(t) {\n      return new (t || PlanDetailPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Platform), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i1.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlanDetailPage,\n      selectors: [[\"app-pago-detail\"]],\n      decls: 55,\n      vars: 11,\n      consts: [[\"titulo\", \"Detalle de Plan\"], [1, \"detalle-plan\"], [1, \"section\"], [1, \"detalle-header\", \"ps-row\"], [1, \"col-9\"], [1, \"col-3\", \"ion-text-end\"], [1, \"separator\"], [1, \"section\", \"data\"], [1, \"ps-row\"], [1, \"col-6\", \"data-from\"], [1, \"col-6\", \"data-until\"], [\"class\", \"data-desc\", 4, \"ngIf\", \"ngIfElse\"], [\"noPlanDescription\", \"\"], [1, \"section\", \"total\", \"ps-row\", \"wrap\"], [1, \"col-6\", \"pretotal-item\", \"ps-row\", \"between\"], [1, \"col-12\", \"total-item\"], [\"vertical\", \"bottom\", \"slot\", \"fixed\", 3, \"ngClass\"], [1, \"reservar\", 3, \"click\"], [3, \"ngClass\"], [1, \"data-desc\"]],\n      template: function PlanDetailPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-navbar\", 0);\n          i0.ɵɵelementStart(1, \"ion-content\")(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"h2\");\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"h5\");\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(10, \"div\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(11, \"div\", 6);\n          i0.ɵɵelementStart(12, \"div\", 7)(13, \"div\", 8)(14, \"div\", 9)(15, \"p\")(16, \"b\");\n          i0.ɵɵtext(17, \"Inicia el\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"br\");\n          i0.ɵɵtext(19);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 10)(21, \"p\")(22, \"b\");\n          i0.ɵɵtext(23, \"Vencimiento el\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"br\");\n          i0.ɵɵtext(25);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(26, PlanDetailPage_div_26_Template, 6, 1, \"div\", 11);\n          i0.ɵɵtemplate(27, PlanDetailPage_ng_template_27_Template, 6, 0, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(29, \"div\", 6);\n          i0.ɵɵelementStart(30, \"div\", 13)(31, \"div\", 14)(32, \"p\");\n          i0.ɵɵtext(33, \"Valor del Plan\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"p\");\n          i0.ɵɵtext(35);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"div\", 14)(37, \"p\");\n          i0.ɵɵtext(38, \"Comisi\\u00F3n Pago Online\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"p\");\n          i0.ɵɵtext(40);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(41, \"div\", 15)(42, \"p\");\n          i0.ɵɵtext(43, \"Total\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(44, \"h4\");\n          i0.ɵɵtext(45);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(46, \"ion-fab\", 16)(47, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function PlanDetailPage_Template_div_click_47_listener() {\n            return ctx.contract(ctx.plan.id);\n          });\n          i0.ɵɵelementStart(48, \"span\");\n          i0.ɵɵtext(49, \"Contratar Plan\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(50, \"ion-footer\")(51, \"div\", 18)(52, \"button\", 17);\n          i0.ɵɵlistener(\"click\", function PlanDetailPage_Template_button_click_52_listener() {\n            return ctx.contract(ctx.plan.id);\n          });\n          i0.ɵɵelementStart(53, \"span\");\n          i0.ɵɵtext(54, \"Contratar Plan\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(28);\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate(ctx.plan == null ? null : ctx.plan.name);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.plan == null ? null : ctx.plan.period);\n          i0.ɵɵadvance(10);\n          i0.ɵɵtextInterpolate1(\" \", ctx.dates == null ? null : ctx.dates.start, \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" \", ctx.dates == null ? null : ctx.dates.end, \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.plan == null ? null : ctx.plan.description)(\"ngIfElse\", _r1);\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.plan == null ? null : ctx.plan.amount, \"\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.plan == null ? null : ctx.plan.commission, \"\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.plan == null ? null : ctx.plan.total, \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngClass\", ctx.buttonFixIOS);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", ctx.buttonFixAndroid);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i2.IonContent, i2.IonFab, i2.IonFooter, i5.NavbarComponent]\n    });\n  }\n  return PlanDetailPage;\n})();\nexport { PlanDetailPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
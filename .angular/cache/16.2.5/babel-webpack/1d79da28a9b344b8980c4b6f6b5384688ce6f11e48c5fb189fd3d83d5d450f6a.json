{"ast":null,"code":"import _asyncToGenerator from \"C:/dev/Ionic/purasangre-app-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// env\nimport { environment } from '../../../../environments/environment';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Preferences } from '@capacitor/preferences';\nimport { LoadingController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../shared/navbar/navbar.component\";\nconst _c0 = function (a0) {\n  return {\n    disabled: a0\n  };\n};\nfunction SelectHourPage_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵlistener(\"click\", function SelectHourPage_div_8_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const clase_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.goToAddConfirm(clase_r1.clase_id, clase_r1 == null ? null : clase_r1.active));\n    });\n    i0.ɵɵelementStart(1, \"p\")(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const clase_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, !(clase_r1 == null ? null : clase_r1.active) || clase_r1.rels.reservations.count >= clase_r1.quota || !clase_r1.rels.auth_reservation.can));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", clase_r1.start, \" - \", clase_r1.end, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", clase_r1.rels.reservations.count, \" / \", clase_r1.quota, \" \");\n  }\n}\nlet SelectHourPage = /*#__PURE__*/(() => {\n  class SelectHourPage {\n    constructor(storage, http, router, activatedRoute, loadingController) {\n      this.storage = storage;\n      this.http = http;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.loadingController = loadingController;\n      this.clases = [];\n    }\n    hoursLoader() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const loading = yield _this.loadingController.create({\n          message: 'Cargando clases...'\n        });\n        loading.present().then(() => {\n          const date = _this.activatedRoute.snapshot.paramMap.get('date');\n          const clasetype = _this.activatedRoute.snapshot.paramMap.get('claseTypeId');\n          console.log(_this.activatedRoute.snapshot.paramMap);\n          Preferences.get({\n            key: 'authData'\n          }).then(authData => {\n            const parsedData = JSON.parse(authData.value);\n            const httpOptions = {\n              headers: new HttpHeaders({\n                Authorization: `Bearer ${parsedData.token}`\n              })\n            };\n            _this.http.get(`${environment.SERVER_URL}/clases?date=${date}&type=${clasetype}`, httpOptions).subscribe(result => {\n              console.log('entre a las clases del dia');\n              _this.clases = result.data;\n              console.log(_this.clases);\n              console.log(`${environment.SERVER_URL}/clases?date=${date}&type=${clasetype}`);\n              loading.dismiss();\n            });\n          });\n        });\n      })();\n    }\n    ionViewDidEnter() {\n      this.hoursLoader();\n    }\n    /**\n     * [goToAddConfirm description]\n     */\n    goToAddConfirm(claseId = '0', has = false) {\n      this.router.navigateByUrl(`/home/tabs/clases/${claseId}/show`);\n    }\n    static #_ = this.ɵfac = function SelectHourPage_Factory(t) {\n      return new (t || SelectHourPage)(i0.ɵɵdirectiveInject(Storage), i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.LoadingController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SelectHourPage,\n      selectors: [[\"app-select-hour\"]],\n      decls: 9,\n      vars: 2,\n      consts: [[\"titulo\", \"Nueva Reserva\"], [1, \"reserva\"], [1, \"titleReserva-section\"], [1, \"sky-gradient\"], [1, \"section\", \"grid-hours\"], [\"class\", \"item-hour ion-text-center\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"item-hour\", \"ion-text-center\", 3, \"ngClass\", \"click\"]],\n      template: function SelectHourPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-navbar\", 0);\n          i0.ɵɵelementStart(1, \"ion-content\")(2, \"div\", 1)(3, \"h1\", 2);\n          i0.ɵɵtext(4, \" Seleccionar hora para el \");\n          i0.ɵɵelementStart(5, \"span\", 3);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 4);\n          i0.ɵɵtemplate(8, SelectHourPage_div_8_Template, 6, 7, \"div\", 5);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.clases[0] == null ? null : ctx.clases[0].dateHuman);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.clases);\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgForOf, i3.IonContent, i5.NavbarComponent]\n    });\n  }\n  return SelectHourPage;\n})();\nexport { SelectHourPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
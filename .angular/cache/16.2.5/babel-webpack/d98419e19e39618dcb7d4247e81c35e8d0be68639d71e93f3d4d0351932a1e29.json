{"ast":null,"code":"import _asyncToGenerator from \"C:/dev/Ionic/purasangre-app-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// env\nimport { environment } from '../../../environments/environment';\nimport { Router } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Preferences } from '@capacitor/preferences';\nimport { Platform, ToastController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nfunction ClasesPage_div_12_div_1_div_1_div_8_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wod_r5 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Tuviste clase a las \", wod_r5.rels.auth.todayReservation.start, \" \");\n  }\n}\nfunction ClasesPage_div_12_div_1_div_1_div_8_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wod_r5 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Perdiste tu clase a las \", wod_r5.rels.auth.todayReservation.start, \" \");\n  }\n}\nfunction ClasesPage_div_12_div_1_div_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ClasesPage_div_12_div_1_div_1_div_8_p_1_Template, 2, 1, \"p\", 27);\n    i0.ɵɵtemplate(2, ClasesPage_div_12_div_1_div_1_div_8_p_2_Template, 2, 1, \"p\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wod_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", wod_r5.rels.auth.todayReservation.status === 3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", wod_r5.rels.auth.todayReservation.status === 4);\n  }\n}\nfunction ClasesPage_div_12_div_1_div_1_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const wod_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"No tienes reserva de \", wod_r5.claseType, \" para hoy\");\n  }\n}\nconst _c0 = function (a5) {\n  return [\"/\", \"home\", \"tabs\", \"clases\", \"wods\", a5, \"show\"];\n};\nfunction ClasesPage_div_12_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 21)(2, \"div\", 22)(3, \"div\", 23);\n    i0.ɵɵelement(4, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 25)(6, \"h2\", 26);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ClasesPage_div_12_div_1_div_1_div_8_Template, 3, 2, \"div\", 27);\n    i0.ɵɵtemplate(9, ClasesPage_div_12_div_1_div_1_div_9_Template, 3, 1, \"div\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 28);\n    i0.ɵɵelement(11, \"ion-icon\", 29);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const wod_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, wod_r5.identificador));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", wod_r5.rels.claseType.iconWhite, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", wod_r5.claseType, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", wod_r5.rels.auth.reservationHas);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !wod_r5.rels.auth.reservationHas);\n  }\n}\nfunction ClasesPage_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ClasesPage_div_12_div_1_div_1_Template, 12, 7, \"div\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const wod_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !wod_r5.rels.auth.reservationHas);\n  }\n}\nfunction ClasesPage_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, ClasesPage_div_12_div_1_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelement(2, \"hr\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.todayWods);\n  }\n}\nconst _c1 = function (a4) {\n  return [\"/\", \"home\", \"tabs\", \"clases\", a4, \"edit-confirm\"];\n};\nfunction ClasesPage_div_13_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 22)(2, \"div\", 23);\n    i0.ɵɵelement(3, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 25)(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 28);\n    i0.ɵɵelement(12, \"ion-icon\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const clase_r17 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c1, clase_r17.clase_id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", clase_r17.rels.claseType.icon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(clase_r17.dateHuman);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(clase_r17.rels.claseType.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", clase_r17.start, \" - \", clase_r17.end, \" hrs\");\n  }\n}\nfunction ClasesPage_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h1\", 11);\n    i0.ɵɵtext(2, \"Sin Confirmar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵtemplate(4, ClasesPage_div_13_div_4_Template, 13, 8, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"hr\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.pendient);\n  }\n}\nfunction ClasesPage_div_14_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 33)(2, \"div\", 23);\n    i0.ɵɵelement(3, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 25)(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 31);\n    i0.ɵɵtext(8, \"CrossFit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 28);\n    i0.ɵɵelement(12, \"ion-icon\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const clase_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c1, clase_r19.clase_id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", clase_r19.rels.claseType.icon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(clase_r19.dateHuman);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", clase_r19.start, \" - \", clase_r19.end, \" hrs\");\n  }\n}\nfunction ClasesPage_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h1\", 11);\n    i0.ɵɵtext(2, \"Confirmadas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵtemplate(4, ClasesPage_div_14_div_4_Template, 13, 7, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"hr\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.confirmed);\n  }\n}\nconst _c2 = function (a4) {\n  return [\"/\", \"home\", \"tabs\", \"clases\", a4, \"show\"];\n};\nfunction ClasesPage_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 22)(2, \"div\", 23);\n    i0.ɵɵelement(3, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 25)(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 28);\n    i0.ɵɵelement(12, \"ion-icon\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const clase_r20 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c2, clase_r20.clase_id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", clase_r20.rels.claseType.icon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(clase_r20.dateHuman);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(clase_r20.typeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", clase_r20.start, \" - \", clase_r20.end, \" hrs\");\n  }\n}\n// import { ClasesService } from './clases.service';\nlet ClasesPage = /*#__PURE__*/(() => {\n  class ClasesPage {\n    constructor(plt,\n    // private storage: Storage,\n    router, http, toastController) {\n      this.plt = plt;\n      this.router = router;\n      this.http = http;\n      this.toastController = toastController;\n      this.todayWods = [];\n      this.clases = [];\n      this.alerts = [];\n      this.pendient = [];\n      this.confirmed = [];\n      this.page = 1;\n      this.buttonFixIOS = '';\n      this.buttonFixAndroid = '';\n      this.confirmation = '';\n      if (this.plt.is('ios')) {\n        // Si es iOS\n        this.buttonFixIOS = 'button-fix-ios';\n        this.buttonFixAndroid = 'display-none';\n      } else {\n        // Si es Android\n        this.buttonFixIOS = 'display-none';\n        this.buttonFixAndroid = 'button-fix';\n      }\n      // var buttonConf = document.getElementById('confirmacion');\n    }\n    // Refresh\n    doRefresh(event) {\n      console.log('Begin async operation');\n      this.ionViewDidEnter();\n      setTimeout(() => {\n        console.log('Async operation has ended');\n        event.target.complete();\n      }, 2000);\n    }\n    presentToast() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this.toastController.create({\n          message: 'Hora Reservada',\n          duration: 2500,\n          position: 'top'\n        });\n        toast.present();\n      })();\n    }\n    ionViewDidEnter() {\n      console.log('estoy cargandome........');\n      Preferences.get({\n        key: 'authData'\n      }).then(authData => {\n        const parsedData = JSON.parse(authData.value);\n        this.httpOptions = {\n          headers: new HttpHeaders({\n            Authorization: `Bearer ${parsedData.token}` // updated\n          })\n        };\n\n        this.http.get(`${environment.SERVER_URL}/clases-coming?sort_by_asc=date`, this.httpOptions).subscribe(result => {\n          this.pendient = result.data.filter(clase => clase.rels.auth_reservation.status === 'Pendiente');\n          this.confirmed = result.data.filter(clase => clase.rels.auth_reservation.status === 'Confirmada');\n        }, err => {\n          console.log('error clases');\n          // this.authService.refreshToken();\n        });\n\n        this.http.get(`${environment.SERVER_URL}/clases-historic?sort_by_desc=date&page=${this.page}`, this.httpOptions).subscribe(result => {\n          this.clases = result.data.filter(clase => clase.rels.auth_reservation.status === 'Consumida');\n        });\n        this.http.get(`${environment.SERVER_URL}/users-alerts`, this.httpOptions).subscribe(result => {\n          this.alerts = result.data;\n        });\n        this.http.get(`${environment.SERVER_URL}/todaywods`, this.httpOptions).subscribe(result => {\n          this.todayWods = result.data;\n        });\n      });\n    }\n    goToSelectClaseType() {\n      console.log('entre a la clase type');\n      this.router.navigate(['/home/tabs/clases/clase-type']);\n    }\n    goTo(wod) {\n      const reservation = wod.rels.auth.todayReservation;\n      console.log('entre goto');\n      console.log(reservation);\n      if (wod.rels.auth.reservationHas) {\n        console.log('tengo clase');\n        if (reservation.status === 1 || reservation.status === 2) {\n          this.router.navigate(['/home/edit-confirm/' + reservation.id]);\n        }\n        if (reservation.status === 3) {\n          this.router.navigate(['/home/clase/' + reservation.id]);\n        }\n        if (reservation.status === 4) {\n          this.router.navigate(['/home/wods/' + wod.identificador]);\n        }\n      } else {\n        console.log('no tengo clase');\n        this.router.navigate(['/home/wods/' + wod.identificador]);\n      }\n    }\n    goClase(id) {\n      this.router.navigate(['/home/tabs/clases/' + id + '/show']);\n    }\n    loadMoreClases(infiniteScrollEvent) {\n      this.http.get(`${environment.SERVER_URL}/clases-historic?sort_by_desc=date&page=${this.page}`, this.httpOptions).subscribe(result => {\n        console.log('mas clases');\n        console.log('page:' + this.page);\n        this.clases = this.clases.concat(result.data.filter(clase => clase.rels.auth_reservation.status === 'Consumida'));\n        this.page++;\n        infiniteScrollEvent.target.complete();\n      }, err => {\n        console.log('error clases');\n      });\n    }\n    enter() {\n      console.log('entreeeeeeeee!!!!!!!!!!!!!!!');\n    }\n    static #_ = this.ɵfac = function ClasesPage_Factory(t) {\n      return new (t || ClasesPage)(i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i1.ToastController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClasesPage,\n      selectors: [[\"app-clases\"]],\n      decls: 25,\n      vars: 4,\n      consts: [[1, \"header-toolbar\"], [1, \"toolbar-left\"], [1, \"title\", \"font-bold\"], [1, \"title-header\"], [1, \"toolbar-right\"], [\"src\", \"assets/brand/ma_purasangre.png\", 1, \"shieldLogoBN\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"pullingIcon\", \"\", \"pullingText\", \"\", \"refreshingSpinner\", \"crescent\"], [\"class\", \"clases-cards-wrapper\", 4, \"ngIf\"], [\"class\", \"section\", 4, \"ngIf\"], [1, \"section\"], [1, \"title-section\"], [1, \"clases-cards\"], [\"class\", \"clase-card\", 3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [\"threshold\", \"100px\", 3, \"ionInfinite\"], [\"loadingSpinner\", \"crescent\", \"loadingText\", \"Cargando clases...\"], [\"color\", \"success\", \"expand\", \"block\", 3, \"click\"], [1, \"clases-cards-wrapper\"], [4, \"ngFor\", \"ngForOf\"], [1, \"separator\"], [\"class\", \"clases-cards\", 4, \"ngIf\"], [1, \"clase-card\", \"today\", 3, \"routerLink\"], [1, \"ps-row\", \"ion-align-items-center\"], [1, \"col-3\", \"class-type\"], [1, \"class-icon\", 3, \"src\"], [1, \"col-10\", \"class-data\"], [2, \"margin-bottom\", \"4px\", \"text-transform\", \"capitalize\"], [4, \"ngIf\"], [1, \"col-2\"], [\"src\", \"assets/icon/arrow-right.svg\"], [1, \"clase-card\", 3, \"routerLink\"], [1, \"type-class\"], [\"src\", \"assets/icon/arrow-right-black.svg\"], [1, \"ps-row\", \"align-items-center\"]],\n      template: function ClasesPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"div\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"span\", 3);\n          i0.ɵɵtext(6, \"Mis Clases\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 4);\n          i0.ɵɵelement(8, \"img\", 5);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(9, \"ion-content\")(10, \"ion-refresher\", 6);\n          i0.ɵɵlistener(\"ionRefresh\", function ClasesPage_Template_ion_refresher_ionRefresh_10_listener($event) {\n            return ctx.doRefresh($event);\n          });\n          i0.ɵɵelement(11, \"ion-refresher-content\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(12, ClasesPage_div_12_Template, 3, 1, \"div\", 8);\n          i0.ɵɵtemplate(13, ClasesPage_div_13_Template, 6, 1, \"div\", 9);\n          i0.ɵɵtemplate(14, ClasesPage_div_14_Template, 6, 1, \"div\", 9);\n          i0.ɵɵelementStart(15, \"div\", 10)(16, \"h1\", 11);\n          i0.ɵɵtext(17, \"Clases Anteriores\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 12);\n          i0.ɵɵtemplate(19, ClasesPage_div_19_Template, 13, 8, \"div\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"ion-infinite-scroll\", 14);\n          i0.ɵɵlistener(\"ionInfinite\", function ClasesPage_Template_ion_infinite_scroll_ionInfinite_20_listener($event) {\n            return ctx.loadMoreClases($event);\n          });\n          i0.ɵɵelement(21, \"ion-infinite-scroll-content\", 15);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(22, \"ion-footer\")(23, \"ion-button\", 16);\n          i0.ɵɵlistener(\"click\", function ClasesPage_Template_ion_button_click_23_listener() {\n            return ctx.goToSelectClaseType();\n          });\n          i0.ɵɵtext(24, \"Nueva Reserva\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(12);\n          i0.ɵɵproperty(\"ngIf\", ctx.todayWods.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.pendient.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.confirmed.length > 0);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.clases);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i1.IonButton, i1.IonContent, i1.IonFooter, i1.IonHeader, i1.IonIcon, i1.IonInfiniteScroll, i1.IonInfiniteScrollContent, i1.IonRefresher, i1.IonRefresherContent, i1.IonToolbar, i1.RouterLinkDelegate, i2.RouterLink]\n    });\n  }\n  return ClasesPage;\n})();\nexport { ClasesPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// env\nimport { environment } from '../../../environments/environment';\nimport { Router } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Preferences } from '@capacitor/preferences';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@ionic/angular\";\nfunction PlansPage_div_19_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.userActualPlan == null ? null : ctx_r4.userActualPlan.rels == null ? null : ctx_r4.userActualPlan.rels.bill.amount);\n  }\n}\nconst _c0 = function (a4) {\n  return [\"/\", \"home\", \"tabs\", \"plans\", a4, \"details\"];\n};\nfunction PlansPage_div_19_button_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 40);\n    i0.ɵɵtext(1, \" Renovar este Plan \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, ctx_r5.userActualPlan == null ? null : ctx_r5.userActualPlan.rels == null ? null : ctx_r5.userActualPlan.rels.plan.id));\n  }\n}\nconst _c1 = function (a0, a1) {\n  return {\n    \"active\": a0,\n    \"finished\": a1\n  };\n};\nfunction PlansPage_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 30)(2, \"div\", 31)(3, \"div\", 32)(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h5\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 33)(9, \"div\", 34);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 35)(12, \"div\", 36)(13, \"p\")(14, \"b\");\n    i0.ɵɵtext(15, \"Contratado el\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"b\");\n    i0.ɵɵtext(20, \"Vencimiento el\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"br\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(23, PlansPage_div_19_div_23_Template, 3, 1, \"div\", 37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(24, PlansPage_div_19_button_24_Template, 2, 3, \"button\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.rels == null ? null : ctx_r0.userActualPlan.rels.plan.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.rels == null ? null : ctx_r0.userActualPlan.rels.plan.period);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c1, (ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.status == null ? null : ctx_r0.userActualPlan.status.id) == 1, (ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.status == null ? null : ctx_r0.userActualPlan.status.id) == 4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.status == null ? null : ctx_r0.userActualPlan.status.name, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.inicio, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.vencimiento, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.rels == null ? null : ctx_r0.userActualPlan.rels.bill.has);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userActualPlan == null ? null : ctx_r0.userActualPlan.canContract);\n  }\n}\nfunction PlansPage_ng_template_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtext(1, \" No tienes un plan activo.\");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3, \" Puedes comprar un plan a continuaci\\u00F3n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlansPage_div_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 31)(2, \"div\", 36)(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 43)(6, \"h4\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const plan_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, plan_r6 == null ? null : plan_r6.id));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(plan_r6 == null ? null : plan_r6.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", plan_r6 == null ? null : plan_r6.amount, \"\");\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nconst TOKEN_KEY = 'auth-token';\nlet PlansPage = /*#__PURE__*/(() => {\n  class PlansPage {\n    constructor(\n    // private storage: Storage,\n    router, http) {\n      this.router = router;\n      this.http = http;\n      this.plans = '';\n      this.filteredPlans = '';\n      this.userPlans = '';\n      this.userActivePlan = '';\n      this.userActualPlan = '';\n      this.selectedFilter1 = true;\n      this.selectedFilter3 = false;\n      this.selectedFilter5 = false;\n      this.selectedFilter6 = false;\n      this.customAlertOptions = {\n        header: 'Clases'\n      };\n      this.classes = [{\n        name: 'CrossFit'\n      }, {\n        name: 'Frenetic'\n      }];\n    }\n    // Refresh\n    doRefresh(event) {\n      console.log('Begin async operation');\n      this.ionViewDidEnter();\n      setTimeout(() => {\n        console.log('Async operation has ended');\n        event.target.complete();\n      }, 2000);\n    }\n    ionViewDidEnter() {\n      Preferences.get({\n        key: 'authData'\n      }).then(authData => {\n        const parsedData = JSON.parse(authData.value);\n        const httpOptions = {\n          headers: new HttpHeaders({\n            Authorization: `Bearer ${parsedData.token}` // updated\n          })\n        };\n\n        this.http.get(`${environment.SERVER_URL}/profile/actualplan`, httpOptions).subscribe(result => {\n          this.userActualPlan = result.data;\n          console.log(this.userActualPlan);\n        });\n        this.http.get(`${environment.SERVER_URL}/plans?all=true`, httpOptions).subscribe(result => {\n          this.plans = result.data;\n          console.log('entre todos los planes');\n          console.log(this.plans);\n          this.filteredPlans = this.plans.filter(plan => plan.periodId === 1 && plan.contractable && !plan.convenio);\n          console.log('filtrados:');\n          console.log(this.filteredPlans);\n        });\n      });\n    }\n    planFilter(id) {\n      switch (id) {\n        case 1:\n          this.selectedFilter1 = true;\n          this.selectedFilter3 = false;\n          this.selectedFilter5 = false;\n          this.selectedFilter6 = false;\n          break;\n        case 3:\n          this.selectedFilter1 = false;\n          this.selectedFilter3 = true;\n          this.selectedFilter5 = false;\n          this.selectedFilter6 = false;\n          break;\n        case 5:\n          this.selectedFilter1 = false;\n          this.selectedFilter3 = false;\n          this.selectedFilter5 = true;\n          this.selectedFilter6 = false;\n          break;\n        case 6:\n          this.selectedFilter1 = false;\n          this.selectedFilter3 = false;\n          this.selectedFilter5 = false;\n          this.selectedFilter6 = true;\n          break;\n        default:\n      }\n      this.filteredPlans = this.plans.filter(plan => plan.periodId === id && plan.contractable && !plan.convenio);\n      // this.selectedFilter1 = true;\n    }\n    static #_ = this.ɵfac = function PlansPage_Factory(t) {\n      return new (t || PlansPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlansPage,\n      selectors: [[\"app-plans\"]],\n      decls: 59,\n      vars: 15,\n      consts: [[1, \"header-toolbar\"], [1, \"toolbar-left\"], [1, \"title\", \"font-bold\"], [1, \"title-header\"], [1, \"toolbar-right\"], [\"src\", \"assets/brand/ma_purasangre.png\", 1, \"shieldLogoBN\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"pullingIcon\", \"\", \"pullingText\", \"\", \"refreshingSpinner\", \"crescent\"], [1, \"section\"], [1, \"title-grid\"], [1, \"title-section\"], [1, \"option\", \"click-ver-pagos\", 3, \"routerLink\"], [4, \"ngIfWithoutPlan\", \"ngIf\"], [\"withoutPlan\", \"\"], [1, \"separator\", \"separator-plan\"], [1, \"option\", \"click-ver-filtros\"], [1, \"items-filter\"], [1, \"item\", 3, \"ngClass\", \"click\"], [\"src\", \"/assets/icon/filter-monthly.svg\", 1, \"normal\"], [\"src\", \"/assets/icon/filter-monthly-selected.svg\", 1, \"active\"], [1, \"normal\"], [1, \"active\"], [\"src\", \"/assets/icon/filter-quarterly.svg\", 1, \"normal\"], [\"src\", \"/assets/icon/filter-quarterly-selected.svg\", 1, \"active\"], [\"src\", \"/assets/icon/filter-biannual.svg\", 1, \"normal\"], [\"src\", \"/assets/icon/filter-biannual-selected.svg\", 1, \"active\"], [\"src\", \"/assets/icon/filter-annual.svg\", 1, \"normal\"], [\"src\", \"/assets/icon/filter-annual-selected.svg\", 1, \"active\"], [1, \"plans-items\"], [\"class\", \"card-plan clickable\", 3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-plan\", \"actual\"], [1, \"ps-row\", \"plan-up\"], [1, \"col-7\"], [1, \"ion-text-end\", \"col-5\"], [1, \"status\", 3, \"ngClass\"], [1, \"ps-row\", \"plan-bottom\", \"ion-align-items-end\"], [1, \"col-8\"], [\"class\", \"col-5 amount ion-text-end\", 4, \"ngIf\"], [\"class\", \"button-confirm\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"col-5\", \"amount\", \"ion-text-end\"], [1, \"button-confirm\", 3, \"routerLink\"], [1, \"card-plan\", \"no-plan\"], [1, \"card-plan\", \"clickable\", 3, \"routerLink\"], [1, \"col-4\", \"amount\", \"ion-text-end\"]],\n      template: function PlansPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"div\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"span\", 3);\n          i0.ɵɵtext(6, \"Planes\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 4);\n          i0.ɵɵelement(8, \"img\", 5);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(9, \"ion-content\")(10, \"ion-refresher\", 6);\n          i0.ɵɵlistener(\"ionRefresh\", function PlansPage_Template_ion_refresher_ionRefresh_10_listener($event) {\n            return ctx.doRefresh($event);\n          });\n          i0.ɵɵelement(11, \"ion-refresher-content\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9)(14, \"h1\", 10);\n          i0.ɵɵtext(15, \"Plan Actual\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 11)(17, \"p\");\n          i0.ɵɵtext(18, \"Historial\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(19, PlansPage_div_19_Template, 25, 11, \"div\", 12);\n          i0.ɵɵtemplate(20, PlansPage_ng_template_20_Template, 4, 0, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"div\", 14);\n          i0.ɵɵelementStart(23, \"div\", 8)(24, \"div\", 9)(25, \"h1\", 10);\n          i0.ɵɵtext(26, \"Planes\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(27, \"div\", 15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 16)(29, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function PlansPage_Template_div_click_29_listener() {\n            return ctx.planFilter(1);\n          });\n          i0.ɵɵelement(30, \"img\", 18)(31, \"img\", 19);\n          i0.ɵɵelementStart(32, \"h6\", 20);\n          i0.ɵɵtext(33, \"Mensual\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"h6\", 21);\n          i0.ɵɵtext(35, \"Mensual\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(36, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function PlansPage_Template_div_click_36_listener() {\n            return ctx.planFilter(3);\n          });\n          i0.ɵɵelement(37, \"img\", 22)(38, \"img\", 23);\n          i0.ɵɵelementStart(39, \"h6\", 20);\n          i0.ɵɵtext(40, \"Trimestral\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"h6\", 21);\n          i0.ɵɵtext(42, \"Trimestral\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(43, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function PlansPage_Template_div_click_43_listener() {\n            return ctx.planFilter(5);\n          });\n          i0.ɵɵelement(44, \"img\", 24)(45, \"img\", 25);\n          i0.ɵɵelementStart(46, \"h6\", 20);\n          i0.ɵɵtext(47, \"Semestral\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"h6\", 21);\n          i0.ɵɵtext(49, \"Semestral\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(50, \"div\", 17);\n          i0.ɵɵlistener(\"click\", function PlansPage_Template_div_click_50_listener() {\n            return ctx.planFilter(6);\n          });\n          i0.ɵɵelement(51, \"img\", 26)(52, \"img\", 27);\n          i0.ɵɵelementStart(53, \"h6\", 20);\n          i0.ɵɵtext(54, \"Anual\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(55, \"h6\", 21);\n          i0.ɵɵtext(56, \"Anual\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(57, \"div\", 28);\n          i0.ɵɵtemplate(58, PlansPage_div_58_Template, 8, 5, \"div\", 29);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(16);\n          i0.ɵɵproperty(\"routerLink\", \"historial\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.userActualPlan);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c2, ctx.selectedFilter1));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c2, ctx.selectedFilter3));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c2, ctx.selectedFilter5));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c2, ctx.selectedFilter6));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredPlans);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.IonContent, i4.IonHeader, i4.IonRefresher, i4.IonRefresherContent, i4.IonToolbar, i4.RouterLinkDelegate, i1.RouterLink]\n    });\n  }\n  return PlansPage;\n})();\nexport { PlansPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}